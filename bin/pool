#!/usr/bin/ruby
require 'rubygems'
require 'rack'
require 'lib/pool_party'

# Set defaults
list = PoolParty::Optioner.parse(ARGV.dup)
options = PoolParty::Application.options(ARGV.dup)
master = PoolParty::Master.new

# if list.empty?
#   puts "Usage: pool [options] {start|stop|list|maintain}"
#   exit
# end

case list[0]
when "start"
  puts master.start_cloud!
when "stop"
  puts master.request_termination_of_all_instances
when "list"
  puts master.list
when "maintain"
  puts master.start_monitor!
else
  pp master.list
end